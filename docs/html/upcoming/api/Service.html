

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CRUDlex\Service &mdash; CRUDlex 0.15.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="CRUDlex 0.15.0 documentation" href="../index.html"/>
        <link rel="next" title="CRUDlex\StreamedFileResponse" href="StreamedFileResponse.html"/>
        <link rel="prev" title="CRUDlex\ReferenceValidator" href="ReferenceValidator.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CRUDlex
          

          
          </a>

          
            
            
              <div class="version">
                0.15.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../manual/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/datastructures.html">Data Structure Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/datatypes.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/constraints.html">Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/filehandling.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/layouts.html">Overriding Layouts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/templates.html">Overriding Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/optimisticlocking.html">Optimistic Locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/definitionvalidation.html">Definition Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/routes.html">Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/extendedfeatures.html">Extended Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/addons.html">Addons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manual/crudyamlreference.html">CRUD YAML Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="AbstractData.html">CRUDlex\AbstractData</a></li>
<li class="toctree-l1"><a class="reference internal" href="ControllerInterface.html">CRUDlex\ControllerInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataFactoryInterface.html">CRUDlex\DataFactoryInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Entity.html">CRUDlex\Entity</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntityDefinition.html">CRUDlex\EntityDefinition</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntityDefinitionFactoryInterface.html">CRUDlex\EntityDefinitionFactoryInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntityDefinitionValidatorInterface.html">CRUDlex\EntityDefinitionValidatorInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntityEvents.html">CRUDlex\EntityEvents</a></li>
<li class="toctree-l1"><a class="reference internal" href="EntityValidator.html">CRUDlex\EntityValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="FileHandler.html">CRUDlex\FileHandler</a></li>
<li class="toctree-l1"><a class="reference internal" href="ManyValidator.html">CRUDlex\ManyValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="ReferenceValidator.html">CRUDlex\ReferenceValidator</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CRUDlex\Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="StreamedFileResponse.html">CRUDlex\StreamedFileResponse</a></li>
<li class="toctree-l1"><a class="reference internal" href="TwigExtensions.html">CRUDlex\TwigExtensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="UniqueValidator.html">CRUDlex\UniqueValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="YamlReader.html">CRUDlex\YamlReader</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">CRUDlex</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>CRUDlex\Service</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/api/Service.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="crudlex-service">
<h1>CRUDlex\Service<a class="headerlink" href="#crudlex-service" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Service">
<em class="property">class </em><code class="descname">Service</code><a class="headerlink" href="#Service" title="Permalink to this definition">¶</a></dt>
<dd><p>The Service setups and initializes the whole CRUD system and is initialized via the framework
specific implementation, the Silex one for example.
It offers access to AbstractData instances, one for each defined entity off the CRUD YAML file
and various other helper functions.</p>
<dl class="attr">
<dt id="Service::$datas">
<em class="property">property </em><code class="descname">datas</code><a class="headerlink" href="#Service::$datas" title="Permalink to this definition">¶</a></dt>
<dd><p>protected array</p>
<p>Holds the data instances.</p>
</dd></dl>

<dl class="attr">
<dt id="Service::$templates">
<em class="property">property </em><code class="descname">templates</code><a class="headerlink" href="#Service::$templates" title="Permalink to this definition">¶</a></dt>
<dd><p>protected array</p>
<p>Holds the map for overriding templates.</p>
</dd></dl>

<dl class="attr">
<dt id="Service::$manageI18n">
<em class="property">property </em><code class="descname">manageI18n</code><a class="headerlink" href="#Service::$manageI18n" title="Permalink to this definition">¶</a></dt>
<dd><p>protected bool</p>
<p>Holds whether CRUDlex manages i18n.</p>
</dd></dl>

<dl class="attr">
<dt id="Service::$urlGenerator">
<em class="property">property </em><code class="descname">urlGenerator</code><a class="headerlink" href="#Service::$urlGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>protected SymfonyComponentRoutingGeneratorUrlGeneratorInterface</p>
<p>Holds the URL generator.</p>
</dd></dl>

<dl class="method">
<dt id="Service::getLocales">
<code class="descname">getLocales</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Service::getLocales" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the available locales.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">array the available locales</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::initChildren">
<code class="descname">initChildren</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Service::initChildren" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the children of the data entries.</p>
</dd></dl>

<dl class="method">
<dt id="Service::getLocaleLabels">
<code class="descname">getLocaleLabels</code><span class="sig-paren">(</span><em>$crud</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::getLocaleLabels" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a map with localized entity labels from the CRUD YML.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$crud</strong> (<em>array</em>) – the CRUD entity map</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">array the map with localized entity labels</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::configureDefinition">
<code class="descname">configureDefinition</code><span class="sig-paren">(</span><em>EntityDefinition $definition</em>, <em>$crud</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::configureDefinition" title="Permalink to this definition">¶</a></dt>
<dd><p>Configures the EntityDefinition according to the given
CRUD entity map.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$definition</strong> (<a class="reference internal" href="EntityDefinition.html#EntityDefinition" title="EntityDefinition"><em>EntityDefinition</em></a>) – the definition to configure</li>
<li><strong>$crud</strong> (<em>array</em>) – the CRUD entity map</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::createDefinition">
<code class="descname">createDefinition</code><span class="sig-paren">(</span><em>TranslatorInterface $translator</em>, <em>EntityDefinitionFactoryInterface $entityDefinitionFactory</em>, <em>$crud</em>, <em>$name</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::createDefinition" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and setups an EntityDefinition instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$translator</strong> (<em>TranslatorInterface</em>) – the Translator to use for some standard field labels</li>
<li><strong>$entityDefinitionFactory</strong> (<a class="reference internal" href="EntityDefinitionFactoryInterface.html#EntityDefinitionFactoryInterface" title="EntityDefinitionFactoryInterface"><em>EntityDefinitionFactoryInterface</em></a>) – the EntityDefinitionFactory to use</li>
<li><strong>$crud</strong> (<em>array</em>) – the parsed YAML of a CRUD entity</li>
<li><strong>$name</strong> (<em>string</em>) – the name of the entity</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">EntityDefinition the EntityDefinition good to go</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::__construct">
<code class="descname">__construct</code><span class="sig-paren">(</span><em>$crudFile</em>, <em>$crudFileCachingDirectory</em>, <em>UrlGeneratorInterface $urlGenerator</em>, <em>TranslatorInterface $translator</em>, <em>DataFactoryInterface $dataFactory</em>, <em>EntityDefinitionFactoryInterface $entityDefinitionFactory</em>, <em>FilesystemInterface $filesystem</em>, <em>EntityDefinitionValidatorInterface $validator</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::__construct" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$crudFile</strong> (<em>string</em>) – the CRUD YAML file</li>
<li><strong>$crudFileCachingDirectory</strong> (<em>string|null</em>) – the writable directory to store the CRUD YAML file cache</li>
<li><strong>$urlGenerator</strong> (<em>UrlGeneratorInterface</em>) – the URL generator to use</li>
<li><strong>$translator</strong> (<em>TranslatorInterface</em>) – the translator to use</li>
<li><strong>$dataFactory</strong> (<a class="reference internal" href="DataFactoryInterface.html#DataFactoryInterface" title="DataFactoryInterface"><em>DataFactoryInterface</em></a>) – the data factory to use</li>
<li><strong>$entityDefinitionFactory</strong> (<a class="reference internal" href="EntityDefinitionFactoryInterface.html#EntityDefinitionFactoryInterface" title="EntityDefinitionFactoryInterface"><em>EntityDefinitionFactoryInterface</em></a>) – the EntityDefinitionFactory to use</li>
<li><strong>$filesystem</strong> (<em>FilesystemInterface</em>) – the filesystem to use</li>
<li><strong>$validator</strong> (<a class="reference internal" href="EntityDefinitionValidatorInterface.html#EntityDefinitionValidatorInterface" title="EntityDefinitionValidatorInterface"><em>EntityDefinitionValidatorInterface</em></a>) – the validator to use, null if no validation required</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::getData">
<code class="descname">getData</code><span class="sig-paren">(</span><em>$name</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::getData" title="Permalink to this definition">¶</a></dt>
<dd><p>Getter for the AbstractData instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$name</strong> (<em>string</em>) – the entity name of the desired Data instance</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">AbstractData the AbstractData instance or null on invalid name</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::getEntities">
<code class="descname">getEntities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Service::getEntities" title="Permalink to this definition">¶</a></dt>
<dd><p>Getter for all available entity names.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">string[] a list of all available entity names</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::getEntitiesNavBar">
<code class="descname">getEntitiesNavBar</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Service::getEntitiesNavBar" title="Permalink to this definition">¶</a></dt>
<dd><p>Getter for the entities for the navigation bar.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">string[] a list of all available entity names with their group</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::setTemplate">
<code class="descname">setTemplate</code><span class="sig-paren">(</span><em>$key</em>, <em>$template</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::setTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a template to use instead of the build in ones.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$key</strong> (<em>string</em>) – the template key to use in this format: $section.$action.$entity $section.$action $section</li>
<li><strong>$template</strong> (<em>string</em>) – the template to use for this key</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::getTemplate">
<code class="descname">getTemplate</code><span class="sig-paren">(</span><em>$section</em>, <em>$action</em>, <em>$entity</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::getTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the Twig template to use for the given parameters depending on
the existance of certain template keys set in this order:</p>
<p>$section.$action.$entity
$section.$action
$section</p>
<p>If nothing exists, this string is returned: “&#64;crud/&lt;action&gt;.twig”</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$section</strong> (<em>string</em>) – the section of the template, either “layout” or “template”</li>
<li><strong>$action</strong> (<em>string</em>) – the current calling action like “create” or “show”</li>
<li><strong>$entity</strong> (<em>string</em>) – the current calling entity</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">string the best fitting template</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::setLocale">
<code class="descname">setLocale</code><span class="sig-paren">(</span><em>$locale</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::setLocale" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the locale to be used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$locale</strong> (<em>string</em>) – the locale to be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::isManageI18n">
<code class="descname">isManageI18n</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Service::isManageI18n" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets whether CRUDlex manages the i18n.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">bool true if so</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::setManageI18n">
<code class="descname">setManageI18n</code><span class="sig-paren">(</span><em>$manageI18n</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::setManageI18n" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets whether CRUDlex manages the i18n.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$manageI18n</strong> (<em>bool</em>) – true if so</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Service::generateURL">
<code class="descname">generateURL</code><span class="sig-paren">(</span><em>$name</em>, <em>$parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#Service::generateURL" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an URL.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$name</strong> (<em>string</em>) – the name of the route</li>
<li><strong>$parameters</strong> (<em>mixed</em>) – an array of parameters</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">null|string the generated URL</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="StreamedFileResponse.html" class="btn btn-neutral float-right" title="CRUDlex\StreamedFileResponse" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ReferenceValidator.html" class="btn btn-neutral" title="CRUDlex\ReferenceValidator" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Philip Lehmann-Böhm.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.15.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>